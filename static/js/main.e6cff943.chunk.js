(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{26:function(e,t,c){},28:function(e,t,c){},29:function(e,t,c){"use strict";c.r(t);var n=c(13),a=c(6),s=(c(24),c(25),c(2)),r=(c(26),c(11)),l=c(5),i=c.n(l),j=c(0),o=function(e){var t=e.children,c=e.to;return Object(j.jsx)(a.c,{to:c,className:function(e){return function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return i()(c,Object(r.a)({},t,e))}(e.isActive,"has-background-grey-lighter","navbar-item")},children:t})},u=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("nav",{"data-cy":"nav",className:"navbar has-shadow default__navbar",role:"navigation","aria-label":"main navigation",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"navbar-brand",children:[Object(j.jsx)(o,{to:"/",children:"Home"}),Object(j.jsx)(o,{to:"/people",children:"People"})]})})}),Object(j.jsx)("main",{className:"section",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)(s.b,{})})})]})},d=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("h1",{className:"title",children:"Home Page"})})},b=c(3),h=c(1),m=(c(28),function(){return Object(j.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(j.jsx)("div",{className:"Loader__content"})})});function O(){return(e=500,new Promise((function(t){return setTimeout(t,e)}))).then((function(){return fetch("https://mate-academy.github.io/react_people-table/api/people.json")})).then((function(e){return e.json()}));var e}var x=c(8),p=c(9),f=function(e){var t=e.person,c=Object(s.g)().search;return Object(j.jsx)(a.b,{to:{pathname:"/people/".concat(t.slug),search:c},className:i()({"has-text-danger":"f"===t.sex}),children:t.name})},v=c(15);function N(e,t){var c=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(b.a)(e,2),n=t[0],a=t[1];null===a?c.delete(n):Array.isArray(a)?(c.delete(n),a.forEach((function(e){c.append(n,e)}))):c.set(n,a)})),c.toString()}var g=["children","params"],y=function(e){var t=e.children,c=e.params,n=Object(v.a)(e,g),s=Object(a.d)(),r=Object(b.a)(s,1)[0];return Object(j.jsx)(a.c,Object(x.a)(Object(x.a)({to:{search:N(r,c)}},n),{},{children:t}))},w=function(e){var t=e.people,c=Object(s.i)().slug,n=Object(a.d)(),r=Object(b.a)(n,1)[0],l=Object(h.useMemo)((function(){return r.get("sort")}),[r]),o=Object(h.useMemo)((function(){return r.get("order")}),[r]),u=Object(h.useMemo)((function(){return r.get("sex")}),[r]),d=Object(h.useMemo)((function(){return r.get("query")}),[r]),m=Object(h.useMemo)((function(){return r.getAll("century")}),[r]),O=Object(h.useCallback)((function(e){return Math.trunc(e/100)-1}),[]),v=Object(h.useMemo)((function(){var e=Object(p.a)(t);if(u&&(e=e.filter((function(e){return e.sex===u}))),d){var c=d.toLowerCase();e=e.filter((function(e){var t=e.name,n=e.motherName,a=e.fatherName;return t.toLowerCase().includes(c)||(null===n||void 0===n?void 0:n.toLowerCase().includes(c))||(null===a||void 0===a?void 0:a.toLowerCase().includes(c))}))}return m.length>0&&(e=e.filter((function(e){var t=e.born;return m.includes(String(O(t)))}))),Object(p.a)(e).sort((function(e,t){switch(l){case"name":return o?t.name.localeCompare(e.name):e.name.localeCompare(t.name);case"sex":return o?t.sex.localeCompare(e.sex):e.sex.localeCompare(t.sex);case"born":return o?t.born-e.born:e.born-t.born;case"died":return o?t.died-e.died:e.died-t.died;default:return 0}}))}),[t,l,o,u,d,m]),N=Object(h.useCallback)((function(e){return e?v.find((function(t){return t.name===e})):null}),[v]),g=Object(h.useMemo)((function(){return Object.keys(t[0]).slice(0,-3)}),[t]),w=Object(h.useMemo)((function(){return v.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{mother:N(e.motherName),father:N(e.fatherName)})}))}),[v]);return Object(j.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[g.map((function(e){return Object(j.jsx)("th",{children:Object(j.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:[e,l!==e&&Object(j.jsx)(y,{params:{sort:e},children:Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"fas fa-sort"})})}),l===e&&!o&&Object(j.jsx)(y,{params:{order:"desc"},children:Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"fas fa-sort-up"})})}),l===e&&o&&Object(j.jsx)(y,{params:{order:null,sort:null},children:Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"fas fa-sort-down"})})})]})},e)})),Object(j.jsx)("th",{children:"Mother"}),Object(j.jsx)("th",{children:"Father"})]})}),Object(j.jsx)("tbody",{children:w.map((function(e){return Object(j.jsxs)("tr",{"data-cy":"person",className:i()({"has-background-warning":c===e.slug}),children:[Object(j.jsx)("td",{children:Object(j.jsx)(f,{person:e})}),Object(j.jsx)("td",{children:e.sex}),Object(j.jsx)("td",{children:e.born}),Object(j.jsx)("td",{children:e.died}),Object(j.jsx)("td",{children:e.mother?Object(j.jsx)(f,{person:e.mother}):e.motherName}),Object(j.jsx)("td",{children:e.father?Object(j.jsx)(f,{person:e.father}):e.fatherName})]},e.slug)}))})]})},k=c(14),M=c.n(k),C=function(){var e=Object(a.d)(),t=Object(b.a)(e,2),c=t[0],n=t[1],s=Object(h.useMemo)((function(){return c.get("sex")}),[c]),r=Object(h.useMemo)((function(){return c.get("query")}),[c]),l=Object(h.useMemo)((function(){return c.getAll("century")}),[c]),o=function(e){return l.includes(e)?Object(p.a)(l):[].concat(Object(p.a)(l),[e])},u=Object(h.useCallback)(M()((function(e){e?n({query:e}):(c.delete("query"),n(c))}),500),[]),d=Object(h.useState)(r||""),m=Object(b.a)(d,2),O=m[0],x=m[1];return Object(j.jsxs)("nav",{className:"panel",children:[Object(j.jsx)("p",{className:"panel-heading",children:"Filter"}),Object(j.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(j.jsx)(y,{params:{sex:null},className:i()({"is-active":!s}),children:"All"}),Object(j.jsx)(y,{params:{sex:"m"},className:i()({"is-active":"m"===s}),children:"Male"}),Object(j.jsx)(y,{params:{sex:"f"},className:i()({"is-active":"f"===s}),children:"Female"})]}),Object(j.jsx)("div",{className:"panel-block",children:Object(j.jsxs)("p",{className:"control has-icons-left",children:[Object(j.jsx)("input",{type:"text",placeholder:"Search value","data-cy":"NameFilter",className:"input",value:O,onChange:function(e){x(e.target.value),u(e.target.value)}}),Object(j.jsx)("span",{className:"icon is-left",children:Object(j.jsx)("i",{className:"fas fa-search","aria-hidden":!0})})]})}),Object(j.jsx)("div",{className:"panel-block",children:Object(j.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(j.jsxs)("div",{className:"level-left",children:[Object(j.jsx)(y,{params:{century:o("16")},"data-cy":"century",className:i()("button mr-1",{"is-info":l.includes("16")}),children:"16"}),Object(j.jsx)(y,{params:{century:o("17")},"data-cy":"century",className:i()("button mr-1",{"is-info":l.includes("17")}),children:"17"}),Object(j.jsx)(y,{params:{century:o("18")},"data-cy":"century",className:i()("button mr-1",{"is-info":l.includes("18")}),children:"18"}),Object(j.jsx)(y,{params:{century:o("19")},"data-cy":"century",className:i()("button mr-1",{"is-info":l.includes("19")}),children:"19"}),Object(j.jsx)(y,{params:{century:o("20")},"data-cy":"century",className:i()("button mr-1",{"is-info":l.includes("20")}),children:"20"})]}),Object(j.jsx)("div",{className:"level-right ml-4",children:Object(j.jsx)(y,{params:{century:null},"data-cy":"centuryAll",className:i()("button is-success",{"is-outlined":l.length>0}),children:"All"})})]})}),Object(j.jsx)("div",{className:"panel-block",children:Object(j.jsx)(y,{params:{sex:null,century:null,query:null},className:"button is-link is-outlined is-fullwidth",onClick:function(){return x("")},children:"Reset all filters"})})]})},S=function(){var e=Object(h.useState)(null),t=Object(b.a)(e,2),c=t[0],n=t[1],a=Object(h.useState)(!1),s=Object(b.a)(a,2),r=s[0],l=s[1],i=Object(h.useState)(!1),o=Object(b.a)(i,2),u=o[0],d=o[1],x=Object(h.useState)(!1),p=Object(b.a)(x,2),f=p[0],v=p[1];return Object(h.useEffect)((function(){l(!0),O().then((function(e){0===e.length?d(!0):d(!1),n(e),v(!1)})).catch((function(){return v(!0)})).finally((function(){return l(!1)}))}),[]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{className:"title",children:"People Page"}),r&&Object(j.jsx)("div",{className:"box",children:Object(j.jsx)(m,{})}),f&&Object(j.jsx)("div",{className:"box",children:Object(j.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"})}),u&&Object(j.jsx)("div",{className:"box",children:Object(j.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"})}),c&&Object(j.jsx)("div",{className:"block",children:Object(j.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(j.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(j.jsx)(C,{})}),Object(j.jsx)("div",{className:"column",children:Object(j.jsx)("div",{className:"box table-container",children:Object(j.jsx)(w,{people:c})})})]})})]})},F=function(){return Object(j.jsx)("div",{"data-cy":"app",children:Object(j.jsx)(s.e,{children:Object(j.jsxs)(s.c,{path:"/",element:Object(j.jsx)(u,{}),children:[Object(j.jsx)(s.c,{index:!0,element:Object(j.jsx)(d,{})}),Object(j.jsx)(s.c,{path:"home",element:Object(j.jsx)(s.a,{to:"/",replace:!0})}),Object(j.jsx)(s.c,{path:"people",element:Object(j.jsx)(S,{}),children:Object(j.jsx)(s.c,{path:":slug"})}),Object(j.jsx)(s.c,{path:"*",element:Object(j.jsx)("h1",{className:"title",children:"Page not found"})})]})})})};Object(n.createRoot)(document.getElementById("root")).render(Object(j.jsx)(a.a,{children:Object(j.jsx)(F,{})}))}},[[29,1,2]]]);
//# sourceMappingURL=main.e6cff943.chunk.js.map